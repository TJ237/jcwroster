<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="new_styles.css?v=0.1">
	<title>JCW Roster</title>
</head>

<header>
	<span class="header-container">
		<a href="index.html"> <h3>ROSTER</h3> </a>
		<a href="factions.html"> <h3>FACTIONS</h3> </a>
		<a href="champions.html"> <h3>CHAMPIONS</h3> </a>
		<a href="shows.html"> <h3>SHOWS</h3> </a>
	</span>
</header>

<body onload="loadRoster()">

<div class="row">

<div class="column">
	<div class="dropdown">
  		<button onclick="myFunction()" class="dropbtn">Filters</button>
  		<div id="myDropdown" class="dropdown-content">
			<a id="f_male" value=false href="javascript:setFilters(0);">Male</a>
			<a id="f_female" value=false href="javascript:setFilters(1);">Female</a>
			-----
			<a id="f_raw" value=false href="javascript:setFilters(2);">Raw</a>
			<a id="f_smackdown" value=false href="javascript:setFilters(3);">SmackDown</a>
			<a id="f_freeagent" value=false href="javascript:setFilters(4);">Free Agent</a>
			-----
			<a id="f_face" value=false href="javascript:setFilters(5);">Face</a>
			<a id="f_heel" value=false href="javascript:setFilters(6);">Heel</a>
  		</div>
    </div>

  <div class="vertical-menu" id="rosterList"></div>
</div>

<div class="column left-align">
	<h1 class="wrestler-name" id="w_name">Chad Thundercock</h1>
    <p class="wrestler-subtitle" id="w_subtitle">of Team Thundercock</p><br>
    
	Brand<br><b id="brand">SmackDown</b><br><br>
	Overall<br><b id="overall">90</b><br><br>
	Height<br><b id="height">7'0"</b><br><br>
    Crowd Reaction<br><b id="reaction">Face</b><br><br>
    Hometown<br><b id="hometown">Chad</b><br><br>
    Weight Class<br><b id="weight">Super Heavyweight</b><br><br>
    Class<br><b id="class">Striker</b><br><br>
    Entrance Music<br><b id="music">Mr. McMahon</b><br><br>
    Entrance Motion<br><b id="motion">Mr. McMahon</b><br><br>
    Base Moveset<br><b id="moveset">Custom</b><br><br>
    Signatures<br><b id="sig1">Signature 1</b><br><b id="sig2">Signature 2</b><br><br>
    Finishers<br><b id="fin1">Finisher 1</b><br><b id="fin2">Finisher 2</b><br><br>
</div>

<div class="column left-align">
	<img id="pic" src="https://raw.githubusercontent.com/TJ237/jcwroster/main/Renders/ChadThundercock.jpg" width="500" height="500" alt="Wrestler Picture">
</div>

</div>

<script>

function showChar(id)
{
	document.getElementById("w_name").innerText = myData[id].Name;

	if (myData[id].Faction)
		document.getElementById("w_subtitle").innerText = "of " + myData[id].Faction;
	else
		document.getElementById("w_subtitle").innerText = "";
	
	document.getElementById("brand").innerText = myData[id].Brand;
	document.getElementById("overall").innerText = myData[id].Overall;
	document.getElementById("height").innerText = myData[id].Height + '"';
	document.getElementById("reaction").innerText = myData[id].Reaction;
	document.getElementById("hometown").innerText = myData[id].Hometown;
	document.getElementById("weight").innerText = myData[id].WeightClass;
	document.getElementById("class").innerText = myData[id].Class;
	document.getElementById("music").innerText = myData[id].Music;
	document.getElementById("motion").innerText = myData[id].Entrance;
	document.getElementById("moveset").innerText = myData[id].Moveset;
	document.getElementById("sig1").innerText = myData[id].Signatures[0];
	document.getElementById("sig2").innerText = myData[id].Signatures[1];
	document.getElementById("fin1").innerText = myData[id].Finishers[0];
	document.getElementById("fin2").innerText = myData[id].Finishers[1];

	if (myData[id].Render)
			document.getElementById("pic").src = myData[id].Render;
	else
		document.getElementById("pic").src = "https://raw.githubusercontent.com/TJ237/jcwroster/main/Renders/Vacant.png";
}

var filter_male = false;
var filter_female = false;
var filter_raw = false;
var filter_smackdown = false;
var filter_freeagent = false;
var filter_face = false;
var filter_heel = false;

function setFilters(selection)
{
	switch (selection) {
		case 0: // Male
			var d = document.getElementById("f_male");
			if (!filter_male) d.innerHTML = "&#10004 Male";
				else d.innerHTML = "Male"
			filter_male = !filter_male;
			break;
		case 1: // Female
			var d = document.getElementById("f_female");
			if (!filter_female) d.innerHTML = "&#10004 Female";
				else d.innerHTML = "Female"
			filter_female = !filter_female;
			break;
		case 2: // Raw
			var d = document.getElementById("f_raw");
			if (!filter_raw) d.innerHTML = "&#10004 Raw";
				else d.innerHTML = "Raw";
			filter_raw = !filter_raw;
			break;
		case 3: // SmackDown
			var d = document.getElementById("f_smackdown");
			if (!filter_smackdown) d.innerHTML = "&#10004 SmackDown";
				else d.innerHTML = "SmackDown";
			filter_smackdown = !filter_smackdown;
			break;
		case 4: // Free Agent
			var d = document.getElementById("f_freeagent");
			if (!filter_freeagent) d.innerHTML = "&#10004 Free Agent";
				else d.innerHTML = "Free Agent";
			filter_freeagent = !filter_freeagent;
			break;
		case 5: // Face
			var d = document.getElementById("f_face");
			if (!filter_face) d.innerHTML = "&#10004 Face";
				else d.innerHTML = "Face";
			filter_face = !filter_face;
			break;
		case 6: // Heel
			var d = document.getElementById("f_heel");
			if (!filter_heel) d.innerHTML = "&#10004 Heel";
				else d.innerHTML = "Heel";
			filter_heel = !filter_heel;
			break;
		default:
			break;
	}

	//	rosterList[i].style.display = 'block';
	//	rosterList[i].style.display = 'none';
	for (let i = 0; i < myData.length; i++) {
		var gFilter = true;
		var sFilter = true;
		var rFilter = true;

		if (filter_male != filter_female)
			if (filter_male && !myData[i].Male || filter_female && myData[i].Male)
				gFilter = false;
		
		if (filter_face != filter_heel)
			if (filter_face && myData[i].Reaction == "Heel" || filter_heel && myData[i].Reaction == "Face")
				rFilter = false;

		if (filter_raw != filter_smackdown || filter_raw != filter_freeagent)
		{
			if (myData[i].Brand == "Raw" && !filter_raw)
				rFilter = false;
			else if (myData[i].Brand == "SmackDown" && !filter_smackdown)
				rFilter = false;
			else if (!myData[i].Brand && !filter_freeagent)
				rFilter = false;
		}

		if (gFilter && sFilter && rFilter)
			document.getElementById("s_"+i).style.display = 'block';
		else
			document.getElementById("s_"+i).style.display = 'none';
	}
}

function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}

async function loadRoster()
	{
		const response = await fetch("roster.json?v=23.0.2");
		const json = await response.text();
		
		myData = JSON.parse(json);
		var namesList = document.getElementById("rosterList");
		
		for (i = 0; i < myData.length; i++)
		{
			var a = '<a id="s_'+i+'" href="javascript:showChar('+i+');">'+myData[i].Name+'</a>';
			namesList.innerHTML += a;
		}
	}

</script>

</body>
</html>
